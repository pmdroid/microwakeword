# Library for generating feature vectors from audio data
package(
    # copybara:uncomment default_applicable_licenses = ["//tensorflow:license"],
    default_visibility = ["//visibility:public"],
    licenses = ["notice"],
)

cc_library(
    name = "microfrontend",
    copts = ["-DFIXED_POINT=16"],
    defines = ["FIXED_POINT=16"],
    srcs = [
        "@kissfft//:kiss_fft.c",
        "@kissfft//:kiss_fftr.c",
        "fft.cc",
        "fft_util.cc",
        "filterbank.c",
        "filterbank_util.c",
        "frontend.c",
        "frontend_util.c",
        "log_lut.c",
        "log_scale.c",
        "log_scale_util.c",
        "noise_reduction.c",
        "noise_reduction_util.c",
        "pcan_gain_control.c",
        "pcan_gain_control_util.c",
        "window.c",
        "window_util.c",
    ],
    hdrs = [
        "@kissfft//:kiss_fft.h",
        "@kissfft//:kiss_fftr.h",
        "bits.h",
        "fft.h",
        "fft_util.h",
        "filterbank.h",
        "filterbank_util.h",
        "frontend.h",
        "frontend_util.h",
        "log_lut.h",
        "log_scale.h",
        "log_scale_util.h",
        "noise_reduction.h",
        "noise_reduction_util.h",
        "pcan_gain_control.h",
        "pcan_gain_control_util.h",
        "window.h",
        "window_util.h",
    ],
    includes = ["."],
    deps = [
        "@kissfft//:kiss_fftr_16",
    ],
    visibility = ["//visibility:public"],
)